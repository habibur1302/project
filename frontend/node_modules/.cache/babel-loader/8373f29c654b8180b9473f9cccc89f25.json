{"remainingRequest":"/Users/habiburrahmanriad/Sites/frontend/node_modules/babel-loader/lib/index.js!/Users/habiburrahmanriad/Sites/frontend/node_modules/eslint-loader/index.js??ref--13-0!/Users/habiburrahmanriad/Sites/frontend/src/plugins/axios.js","dependencies":[{"path":"/Users/habiburrahmanriad/Sites/frontend/src/plugins/axios.js","mtime":1632409024604},{"path":"/Users/habiburrahmanriad/Sites/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/habiburrahmanriad/Sites/frontend/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/habiburrahmanriad/Sites/frontend/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import axios from 'axios';\nimport store from '@/store';\nimport router from '@/router';\nimport Swal from 'sweetalert2';\nimport i18n from '@/plugins/i18n'; // Request interceptor\n\naxios.interceptors.request.use(function (request) {\n  var token = store.getters['auth/token'];\n\n  if (token) {\n    request.headers.common['Authorization'] = \"Bearer \".concat(token);\n  }\n\n  var locale = store.getters['lang/locale'];\n\n  if (locale) {\n    request.headers.common['Accept-Language'] = locale;\n  } // request.headers['X-Socket-Id'] = Echo.socketId()\n\n\n  return request;\n}); // Response interceptor\n\naxios.interceptors.response.use(function (response) {\n  return response;\n}, function (error) {\n  var status = error.response.status;\n\n  if (status >= 500) {\n    Swal.fire({\n      type: 'error',\n      title: i18n.t('error_alert_title'),\n      text: i18n.t('error_alert_text'),\n      reverseButtons: true,\n      confirmButtonText: i18n.t('ok'),\n      cancelButtonText: i18n.t('cancel')\n    });\n  }\n\n  if (status === 401 && store.getters['auth/check']) {\n    Swal.fire({\n      type: 'warning',\n      title: i18n.t('token_expired_alert_title'),\n      text: i18n.t('token_expired_alert_text'),\n      reverseButtons: true,\n      confirmButtonText: i18n.t('ok'),\n      cancelButtonText: i18n.t('cancel')\n    }).then(function () {\n      store.commit('auth/LOGOUT');\n      router.push({\n        name: 'login'\n      });\n    });\n  }\n\n  return Promise.reject(error);\n});",{"version":3,"sources":["/Users/habiburrahmanriad/Sites/frontend/src/plugins/axios.js"],"names":["axios","store","router","Swal","i18n","interceptors","request","use","token","getters","headers","common","locale","response","error","status","fire","type","title","t","text","reverseButtons","confirmButtonText","cancelButtonText","then","commit","push","name","Promise","reject"],"mappings":"AACA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,KAAP,MAAkB,SAAlB;AACA,OAAOC,MAAP,MAAmB,UAAnB;AACA,OAAOC,IAAP,MAAiB,aAAjB;AACA,OAAOC,IAAP,MAAiB,gBAAjB,C,CAEA;;AACAJ,KAAK,CAACK,YAAN,CAAmBC,OAAnB,CAA2BC,GAA3B,CAA+B,UAAAD,OAAO,EAAI;AACxC,MAAME,KAAK,GAAGP,KAAK,CAACQ,OAAN,CAAc,YAAd,CAAd;;AACA,MAAID,KAAJ,EAAW;AACTF,IAAAA,OAAO,CAACI,OAAR,CAAgBC,MAAhB,CAAuB,eAAvB,qBAAoDH,KAApD;AACD;;AAED,MAAMI,MAAM,GAAGX,KAAK,CAACQ,OAAN,CAAc,aAAd,CAAf;;AACA,MAAIG,MAAJ,EAAY;AACVN,IAAAA,OAAO,CAACI,OAAR,CAAgBC,MAAhB,CAAuB,iBAAvB,IAA4CC,MAA5C;AACD,GATuC,CAWxC;;;AAEA,SAAON,OAAP;AACD,CAdD,E,CAgBA;;AACAN,KAAK,CAACK,YAAN,CAAmBQ,QAAnB,CAA4BN,GAA5B,CAAgC,UAAAM,QAAQ;AAAA,SAAIA,QAAJ;AAAA,CAAxC,EAAsD,UAAAC,KAAK,EAAI;AAAA,MACrDC,MADqD,GAC1CD,KAAK,CAACD,QADoC,CACrDE,MADqD;;AAG7D,MAAIA,MAAM,IAAI,GAAd,EAAmB;AACjBZ,IAAAA,IAAI,CAACa,IAAL,CAAU;AACRC,MAAAA,IAAI,EAAE,OADE;AAERC,MAAAA,KAAK,EAAEd,IAAI,CAACe,CAAL,CAAO,mBAAP,CAFC;AAGRC,MAAAA,IAAI,EAAEhB,IAAI,CAACe,CAAL,CAAO,kBAAP,CAHE;AAIRE,MAAAA,cAAc,EAAE,IAJR;AAKRC,MAAAA,iBAAiB,EAAElB,IAAI,CAACe,CAAL,CAAO,IAAP,CALX;AAMRI,MAAAA,gBAAgB,EAAEnB,IAAI,CAACe,CAAL,CAAO,QAAP;AANV,KAAV;AAQD;;AAED,MAAIJ,MAAM,KAAK,GAAX,IAAkBd,KAAK,CAACQ,OAAN,CAAc,YAAd,CAAtB,EAAmD;AACjDN,IAAAA,IAAI,CAACa,IAAL,CAAU;AACRC,MAAAA,IAAI,EAAE,SADE;AAERC,MAAAA,KAAK,EAAEd,IAAI,CAACe,CAAL,CAAO,2BAAP,CAFC;AAGRC,MAAAA,IAAI,EAAEhB,IAAI,CAACe,CAAL,CAAO,0BAAP,CAHE;AAIRE,MAAAA,cAAc,EAAE,IAJR;AAKRC,MAAAA,iBAAiB,EAAElB,IAAI,CAACe,CAAL,CAAO,IAAP,CALX;AAMRI,MAAAA,gBAAgB,EAAEnB,IAAI,CAACe,CAAL,CAAO,QAAP;AANV,KAAV,EAOGK,IAPH,CAOQ,YAAM;AACZvB,MAAAA,KAAK,CAACwB,MAAN,CAAa,aAAb;AAEAvB,MAAAA,MAAM,CAACwB,IAAP,CAAY;AAAEC,QAAAA,IAAI,EAAE;AAAR,OAAZ;AACD,KAXD;AAYD;;AAED,SAAOC,OAAO,CAACC,MAAR,CAAef,KAAf,CAAP;AACD,CA9BD","sourcesContent":["\nimport axios from 'axios'\nimport store from '@/store'\nimport router from '@/router'\nimport Swal from 'sweetalert2'\nimport i18n from '@/plugins/i18n'\n\n// Request interceptor\naxios.interceptors.request.use(request => {\n  const token = store.getters['auth/token']\n  if (token) {\n    request.headers.common['Authorization'] = `Bearer ${token}`\n  }\n\n  const locale = store.getters['lang/locale']\n  if (locale) {\n    request.headers.common['Accept-Language'] = locale\n  }\n\n  // request.headers['X-Socket-Id'] = Echo.socketId()\n\n  return request\n})\n\n// Response interceptor\naxios.interceptors.response.use(response => response, error => {\n  const { status } = error.response\n\n  if (status >= 500) {\n    Swal.fire({\n      type: 'error',\n      title: i18n.t('error_alert_title'),\n      text: i18n.t('error_alert_text'),\n      reverseButtons: true,\n      confirmButtonText: i18n.t('ok'),\n      cancelButtonText: i18n.t('cancel')\n    })\n  }\n\n  if (status === 401 && store.getters['auth/check']) {\n    Swal.fire({\n      type: 'warning',\n      title: i18n.t('token_expired_alert_title'),\n      text: i18n.t('token_expired_alert_text'),\n      reverseButtons: true,\n      confirmButtonText: i18n.t('ok'),\n      cancelButtonText: i18n.t('cancel')\n    }).then(() => {\n      store.commit('auth/LOGOUT')\n\n      router.push({ name: 'login' })\n    })\n  }\n\n  return Promise.reject(error)\n})\n"]}]}