{"remainingRequest":"/Users/habiburrahmanriad/Sites/laravel6-frontend/node_modules/babel-loader/lib/index.js!/Users/habiburrahmanriad/Sites/laravel6-frontend/node_modules/eslint-loader/index.js??ref--13-0!/Users/habiburrahmanriad/Sites/laravel6-frontend/src/store/modules/auth.js","dependencies":[{"path":"/Users/habiburrahmanriad/Sites/laravel6-frontend/src/store/modules/auth.js","mtime":1632409024596},{"path":"/Users/habiburrahmanriad/Sites/laravel6-frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/habiburrahmanriad/Sites/laravel6-frontend/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/habiburrahmanriad/Sites/laravel6-frontend/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"/Users/habiburrahmanriad/Sites/laravel6-frontend/node_modules/@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"/Users/habiburrahmanriad/Sites/laravel6-frontend/node_modules/@babel/runtime-corejs2/helpers/esm/defineProperty\";\n\nvar _mutations;\n\nimport axios from 'axios';\nimport Cookies from 'js-cookie';\nimport * as types from \"../mutation-types\"; // state\n\nexport var state = {\n  user: null,\n  token: Cookies.get('token')\n}; // getters\n\nexport var getters = {\n  user: function user(state) {\n    return state.user;\n  },\n  token: function token(state) {\n    return state.token;\n  },\n  check: function check(state) {\n    return state.user !== null;\n  }\n}; // mutations\n\nexport var mutations = (_mutations = {}, _defineProperty(_mutations, types.SAVE_TOKEN, function (state, _ref) {\n  var token = _ref.token,\n      remember = _ref.remember;\n  state.token = token;\n  Cookies.set('token', token, {\n    expires: remember ? 365 : null\n  });\n}), _defineProperty(_mutations, types.FETCH_USER_SUCCESS, function (state, _ref2) {\n  var user = _ref2.user;\n  state.user = user;\n}), _defineProperty(_mutations, types.FETCH_USER_FAILURE, function (state) {\n  state.token = null;\n  Cookies.remove('token');\n}), _defineProperty(_mutations, types.LOGOUT, function (state) {\n  state.user = null;\n  state.token = null;\n  Cookies.remove('token');\n}), _defineProperty(_mutations, types.UPDATE_USER, function (state, _ref3) {\n  var user = _ref3.user;\n  state.user = user;\n}), _mutations); // actions\n\nexport var actions = {\n  saveToken: function saveToken(_ref4, payload) {\n    var commit = _ref4.commit,\n        dispatch = _ref4.dispatch;\n    commit(types.SAVE_TOKEN, payload);\n  },\n  register: function () {\n    var _register = _asyncToGenerator(\n    /*#__PURE__*/\n    regeneratorRuntime.mark(function _callee(_ref5, _ref6) {\n      var dispatch, commit, form;\n      return regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              dispatch = _ref5.dispatch, commit = _ref5.commit;\n              form = _ref6.form;\n              _context.next = 4;\n              return form.post('/api/auth/register');\n\n            case 4:\n              _context.next = 6;\n              return dispatch('login', {\n                form: form\n              });\n\n            case 6:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    function register(_x, _x2) {\n      return _register.apply(this, arguments);\n    }\n\n    return register;\n  }(),\n  login: function () {\n    var _login = _asyncToGenerator(\n    /*#__PURE__*/\n    regeneratorRuntime.mark(function _callee2(_ref7, _ref8) {\n      var dispatch, commit, form, _ref9, data;\n\n      return regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              dispatch = _ref7.dispatch, commit = _ref7.commit;\n              form = _ref8.form;\n              _context2.next = 4;\n              return form.post('/api/auth/login');\n\n            case 4:\n              _ref9 = _context2.sent;\n              data = _ref9.data;\n              _context2.next = 8;\n              return dispatch('saveToken', {\n                token: data.token,\n                remember: this.remember\n              });\n\n            case 8:\n              _context2.next = 10;\n              return dispatch('fetchUser');\n\n            case 10:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, this);\n    }));\n\n    function login(_x3, _x4) {\n      return _login.apply(this, arguments);\n    }\n\n    return login;\n  }(),\n  updateUser: function updateUser(_ref10, payload) {\n    var commit = _ref10.commit;\n    commit(types.UPDATE_USER, payload);\n  },\n  fetchUser: function () {\n    var _fetchUser = _asyncToGenerator(\n    /*#__PURE__*/\n    regeneratorRuntime.mark(function _callee3(_ref11) {\n      var commit, _ref12, data;\n\n      return regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              commit = _ref11.commit;\n              _context3.prev = 1;\n              _context3.next = 4;\n              return axios.get('/api/auth/me');\n\n            case 4:\n              _ref12 = _context3.sent;\n              data = _ref12.data;\n              commit(types.FETCH_USER_SUCCESS, {\n                user: data.data\n              });\n              _context3.next = 12;\n              break;\n\n            case 9:\n              _context3.prev = 9;\n              _context3.t0 = _context3[\"catch\"](1);\n              commit(types.FETCH_USER_FAILURE);\n\n            case 12:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3, null, [[1, 9]]);\n    }));\n\n    function fetchUser(_x5) {\n      return _fetchUser.apply(this, arguments);\n    }\n\n    return fetchUser;\n  }(),\n  logout: function () {\n    var _logout = _asyncToGenerator(\n    /*#__PURE__*/\n    regeneratorRuntime.mark(function _callee4(_ref13) {\n      var commit;\n      return regeneratorRuntime.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              commit = _ref13.commit;\n\n              try {// await axios.post('/api/logout')\n              } catch (e) {}\n\n              commit(types.LOGOUT);\n\n            case 3:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4);\n    }));\n\n    function logout(_x6) {\n      return _logout.apply(this, arguments);\n    }\n\n    return logout;\n  }()\n};",{"version":3,"sources":["/Users/habiburrahmanriad/Sites/laravel6-frontend/src/store/modules/auth.js"],"names":["axios","Cookies","types","state","user","token","get","getters","check","mutations","SAVE_TOKEN","remember","set","expires","FETCH_USER_SUCCESS","FETCH_USER_FAILURE","remove","LOGOUT","UPDATE_USER","actions","saveToken","payload","commit","dispatch","register","form","post","login","data","updateUser","fetchUser","logout","e"],"mappings":"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","sourcesContent":["\nimport axios from 'axios'\nimport Cookies from 'js-cookie'\nimport * as types from '../mutation-types'\n\n// state\nexport const state = {\n  user: null,\n  token: Cookies.get('token')\n}\n\n// getters\nexport const getters = {\n  user: state => state.user,\n  token: state => state.token,\n  check: state => state.user !== null\n}\n\n// mutations\nexport const mutations = {\n  [types.SAVE_TOKEN] (state, { token, remember }) {\n    state.token = token\n    Cookies.set('token', token, { expires: remember ? 365 : null })\n  },\n\n  [types.FETCH_USER_SUCCESS] (state, { user }) {\n    state.user = user\n  },\n\n  [types.FETCH_USER_FAILURE] (state) {\n    state.token = null\n    Cookies.remove('token')\n  },\n\n  [types.LOGOUT] (state) {\n    state.user = null\n    state.token = null\n\n    Cookies.remove('token')\n  },\n\n  [types.UPDATE_USER] (state, { user }) {\n    state.user = user\n  }\n}\n\n// actions\nexport const actions = {\n  saveToken ({ commit, dispatch }, payload) {\n    commit(types.SAVE_TOKEN, payload)\n  },\n\n  async register ({ dispatch, commit }, { form }) {\n    await form.post('/api/auth/register')\n\n    await dispatch('login', { form: form })\n  },\n\n  async login ({ dispatch, commit }, { form }) {\n    const { data } = await form.post('/api/auth/login')\n\n    await dispatch('saveToken', {\n      token: data.token,\n      remember: this.remember\n    })\n\n    await dispatch('fetchUser')\n  },\n\n  updateUser ({ commit }, payload) {\n    commit(types.UPDATE_USER, payload)\n  },\n\n  async fetchUser ({ commit }) {\n    try {\n      const { data } = await axios.get('/api/auth/me')\n\n      commit(types.FETCH_USER_SUCCESS, { user: data.data })\n    } catch (e) {\n      commit(types.FETCH_USER_FAILURE)\n    }\n  },\n\n  async logout ({ commit }) {\n    try {\n      // await axios.post('/api/logout')\n    } catch (e) { }\n\n    commit(types.LOGOUT)\n  }\n}\n"]}]}